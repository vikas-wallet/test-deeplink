<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deeplink Redirect</title>
</head>
<body>
    <script>
        var appURL = "rakutenwalletweb3://";
        var appOpened = false; // Flag to track if the app opened

        // Function to redirect back
        function redirectBack() {
            window.history.back();
        }

        // Function to show the alert
        function showAlert() {
            alert("Rakuten Wallet Web3 app may not be installed. Click OK to return to the previous page.");
            redirectBack();
        }

        // Set a timeout to show the alert if the app doesn't open within a reasonable time
        var alertTimer = setTimeout(function() {
            if (!appOpened) {
                showAlert();
            }
        }, 500); // Adjust the timeout as needed (500ms is a good starting point)

        // Attempt to open the app
        window.location.replace(appURL);

        // Try to detect if the app opened by checking if the page loses focus
        window.addEventListener('blur', function() {
            appOpened = true;
            clearTimeout(alertTimer); // Clear the timer if the app opened
        });

        // If the page is still visible after a short time, assume the app didn't open
        setTimeout(function() {
            if (!appOpened && document.visibilityState === 'visible') {
                showAlert();
            }
        }, 1000); // Adjust the timeout as needed (1000ms is a good starting point)
    </script>
</body>
</html>
